{"ast":null,"code":"var _jsxFileName = \"D:\\\\University\\\\8Eighth Semester\\\\BLN\\\\Project\\\\now-ui-kit-react-master\\\\src\\\\views\\\\App.js\";\nimport { Button, Card, CardHeader, CardBody, CardFooter, CardTitle, Form, Input, Table, InputGroupAddon, InputGroupText, InputGroup, Container, Row } from \"reactstrap\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom'; //import logo from './logo.svg';\n\nimport Web3 from 'web3';\nimport ipfs from './ipfs';\nimport storehash from './storehash'; //header\n//Setting Web3\n\nconst web3 = new Web3(window.web3.currentProvider);\n\nfunction App() {\n  const [state, setState] = useState({\n    ipfsHash: null,\n    buffer: '',\n    ethAddress: '',\n    blockNumber: '',\n    transactionHash: '',\n    gasUsed: '',\n    txReceipt: ''\n  });\n\n  const captureFile = event => {\n    event.stopPropagation();\n    event.preventDefault();\n    const file = event.target.files[0];\n    let reader = new window.FileReader();\n    reader.readAsArrayBuffer(file);\n\n    reader.onloadend = () => convertToBuffer(reader);\n  };\n\n  const convertToBuffer = async reader => {\n    //file is converted to a buffer to prepare for uploading to IPFS\n    const buffer = await Buffer.from(reader.result); //set this buffer -using es6 syntax\n\n    setState({\n      buffer\n    });\n  };\n\n  const onClick = async () => {\n    try {\n      setState({\n        blockNumber: \"waiting..\"\n      });\n      setState({\n        gasUsed: \"waiting...\"\n      }); // get Transaction Receipt in console on click\n      // See: https://web3js.readthedocs.io/en/1.0/web3-eth.html#gettransactionreceipt\n\n      await web3.eth.getTransactionReceipt(state.transactionHash, (err, txReceipt) => {\n        console.log(err, txReceipt);\n        setState({\n          txReceipt\n        });\n      }); //await for getTransactionReceipt\n\n      await setState({\n        blockNumber: state.txReceipt.blockNumber\n      });\n      await setState({\n        gasUsed: state.txReceipt.gasUsed\n      });\n    } //try\n    catch (error) {\n      console.log(error);\n    } //catch\n\n  }; //onClick\n\n\n  const onSubmit = async event => {\n    event.preventDefault();\n\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n\n      try {\n        // Request account access if needed\n        await window.ethereum.enable(); // Acccounts now exposed\n        //bring in user's metamask account address\n\n        const accounts = await web3.eth.getAccounts();\n        console.log('Sending from Metamask account: ' + accounts[0]); //obtain contract address from storehash.js\n\n        const ethAddress = await storehash.options.address;\n        setState({\n          ethAddress\n        }); //save document to IPFS,return its hash#, and set hash# to state\n        //https://github.com/ipfs/interface-ipfs-core/blob/master/SPEC/FILES.md#add \n\n        await ipfs.add(state.buffer, (err, ipfsHash) => {\n          console.log(err, ipfsHash); //setState by setting ipfsHash to ipfsHash[0].hash \n\n          setState({\n            ipfsHash: ipfsHash[0].hash\n          }); // call Ethereum contract method \"sendHash\" and .send IPFS hash to etheruem contract \n          //return the transaction hash from the ethereum contract\n          //see, this https://web3js.readthedocs.io/en/1.0/web3-eth-contract.html#methods-mymethod-send\n\n          storehash.methods.sendHash(state.ipfsHash * 10000000000).send({\n            from: accounts[0]\n          }, (error, transactionHash) => {\n            console.log(transactionHash);\n            setState({\n              transactionHash\n            });\n          }); //storehash \n        }); //await ipfs.add \n      } catch (error) {\n        alert(\"Permission to Access MetaMask Denied\");\n      }\n    } // Legacy dapp browsers...\n    else if (window.web3) {\n        window.web3 = new Web3(web3.currentProvider); // Acccounts always exposed\n\n        web3.eth.sendTransaction({\n          /* ... */\n        });\n      } // Non-dapp browsers...\n      else {\n          console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n        }\n  }; //onSubmit \n\n\n  useEffect(() => {\n    setState({\n      transactionHash\n    });\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section section-signup\",\n    style: {\n      backgroundImage: \"url(\" + require(\"assets/img/bg11.jpg\") + \")\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"top center\",\n      minHeight: \"700px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"card-signup\",\n    \"data-background-color\": \"blue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    action: \"\",\n    className: \"form\",\n    method: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CardTitle, {\n    className: \"title-up\",\n    tag: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 19\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"social-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-neutral btn-icon btn-round\",\n    color: \"facebook\",\n    href: \"#pablo\",\n    onClick: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fab fa-facebook-square\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-neutral btn-icon btn-round\",\n    color: \"twitter\",\n    href: \"#pablo\",\n    onClick: e => e.preventDefault(),\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fab fa-twitter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-neutral btn-icon btn-round\",\n    color: \"google\",\n    href: \"#pablo\",\n    onClick: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fab fa-google-plus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 23\n    }\n  })))), /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    className: \"no-border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(InputGroupAddon, {\n    addonType: \"prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InputGroupText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"now-ui-icons users_circle-08\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"First Name...\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(CardFooter, {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-neutral btn-round\",\n    color: \"info\",\n    href: \"#pablo\",\n    onClick: e => e.preventDefault(),\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 19\n    }\n  }, \"Get Started\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-round btn-white\",\n    color: \"default\",\n    to: \"/login-page\",\n    outline: true,\n    size: \"lg\",\n    tag: Link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, \"View Login Page\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 11\n    }\n  }, \" Choose file to send to IPFS \"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: captureFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"success\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 14\n    }\n  }, \"Send it\")), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }\n  }, \" Get Transaction Receipt \"), /*#__PURE__*/React.createElement(Table, {\n    bordered: true,\n    responsive: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  }, \"Tx Receipt Category\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 21\n    }\n  }, \"Values\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 21\n    }\n  }, \"IPFS Hash # stored on Eth Contract\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 21\n    }\n  }, state.ipfsHash)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }, \"Ethereum Contract Address\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 21\n    }\n  }, state.ethAddress)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 21\n    }\n  }, \"Tx Hash # \"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 21\n    }\n  }, state.transactionHash)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 21\n    }\n  }, \"Block Number # \"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 21\n    }\n  }, state.blockNumber)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 21\n    }\n  }, \"Gas Used\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 21\n    }\n  }, state.gasUsed)))))));\n}\n\nexport default App;","map":{"version":3,"sources":["D:/University/8Eighth Semester/BLN/Project/now-ui-kit-react-master/src/views/App.js"],"names":["Button","Card","CardHeader","CardBody","CardFooter","CardTitle","Form","Input","Table","InputGroupAddon","InputGroupText","InputGroup","Container","Row","React","useState","useEffect","Link","Web3","ipfs","storehash","web3","window","currentProvider","App","state","setState","ipfsHash","buffer","ethAddress","blockNumber","transactionHash","gasUsed","txReceipt","captureFile","event","stopPropagation","preventDefault","file","target","files","reader","FileReader","readAsArrayBuffer","onloadend","convertToBuffer","Buffer","from","result","onClick","eth","getTransactionReceipt","err","console","log","error","onSubmit","ethereum","enable","accounts","getAccounts","options","address","add","hash","methods","sendHash","send","alert","sendTransaction","backgroundImage","require","backgroundSize","backgroundPosition","minHeight","e"],"mappings":"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","sourcesContent":["\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  CardTitle,\n  Form,\n  Input,\n  Table,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroup,\n  Container,\n  Row\n} from \"reactstrap\";\nimport React, { useState, useEffect } from 'react';\nimport {Link} from 'react-router-dom';\n//import logo from './logo.svg';\nimport Web3 from 'web3';\nimport ipfs from './ipfs';\nimport storehash from './storehash';\n//header\n//Setting Web3\nconst web3 = new Web3(window.web3.currentProvider);\nfunction App() {\n\n  \n    const [state,setState] = useState({\n      ipfsHash:null,\n      buffer:'',\n      ethAddress:'',\n      blockNumber:'',\n      transactionHash:'',\n      gasUsed:'',\n      txReceipt: ''   \n    });\n   \n    const captureFile =(event) => {\n        event.stopPropagation()\n        event.preventDefault()\n        const file = event.target.files[0]\n        let reader = new window.FileReader()\n        reader.readAsArrayBuffer(file)\n        reader.onloadend = () => convertToBuffer(reader)    \n      };\n\n    const convertToBuffer = async(reader) => {\n      //file is converted to a buffer to prepare for uploading to IPFS\n        const buffer = await Buffer.from(reader.result);\n      //set this buffer -using es6 syntax\n        setState({buffer});\n    };\n\n    const onClick = async () => {\n\n    try{\n        setState({blockNumber:\"waiting..\"});\n        setState({gasUsed:\"waiting...\"});\n\n        // get Transaction Receipt in console on click\n        // See: https://web3js.readthedocs.io/en/1.0/web3-eth.html#gettransactionreceipt\n        await web3.eth.getTransactionReceipt(state.transactionHash, (err, txReceipt)=>{\n          console.log(err,txReceipt);\n          setState({txReceipt});\n        }); //await for getTransactionReceipt\n\n        await setState({blockNumber: state.txReceipt.blockNumber});\n        await setState({gasUsed: state.txReceipt.gasUsed});    \n      } //try\n    catch(error){\n        console.log(error);\n      } //catch\n  } //onClick\n\n    const onSubmit = async (event) => {\n      event.preventDefault();\n      if (window.ethereum) {\n        window.web3 = new Web3(window.ethereum);\n        try {\n            // Request account access if needed\n            await window.ethereum.enable();\n            // Acccounts now exposed\n            \n                 //bring in user's metamask account address\n                const accounts = await web3.eth.getAccounts();\n              \n                console.log('Sending from Metamask account: ' + accounts[0]);\n\n                //obtain contract address from storehash.js\n                const ethAddress= await storehash.options.address;\n                setState({ethAddress});\n\n                //save document to IPFS,return its hash#, and set hash# to state\n                //https://github.com/ipfs/interface-ipfs-core/blob/master/SPEC/FILES.md#add \n                await ipfs.add(state.buffer, (err, ipfsHash) => {\n                  console.log(err,ipfsHash);\n                  //setState by setting ipfsHash to ipfsHash[0].hash \n                  setState({ ipfsHash:ipfsHash[0].hash });\n\n                  // call Ethereum contract method \"sendHash\" and .send IPFS hash to etheruem contract \n                  //return the transaction hash from the ethereum contract\n                  //see, this https://web3js.readthedocs.io/en/1.0/web3-eth-contract.html#methods-mymethod-send\n                  \n                  storehash.methods.sendHash(state.ipfsHash*10000000000).send({\n                    from: accounts[0] \n                  }, (error, transactionHash) => {\n                    console.log(transactionHash);\n                    setState({transactionHash});\n                  }); //storehash \n                }) //await ipfs.add \n\n\n        } catch (error) {\n            alert(\"Permission to Access MetaMask Denied\");\n        }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        window.web3 = new Web3(web3.currentProvider);\n        // Acccounts always exposed\n        web3.eth.sendTransaction({/* ... */});\n    }\n    // Non-dapp browsers...\n    else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n\n      \n    }; //onSubmit \n  \n    useEffect(() => {\n      setState({transactionHash});\n                      \n    })\n      \n      return (\n        <div>\n        <div\n        className=\"section section-signup\"\n        style={{\n          backgroundImage: \"url(\" + require(\"assets/img/bg11.jpg\") + \")\",\n          backgroundSize: \"cover\",\n          backgroundPosition: \"top center\",\n          minHeight: \"700px\"\n        }}\n      >\n        <Container>\n          <Row>\n            <Card className=\"card-signup\" data-background-color=\"blue\">\n              <Form action=\"\" className=\"form\" method=\"\">\n                <CardHeader className=\"text-center\">\n                  <CardTitle className=\"title-up\" tag=\"h3\">\n                    Sign Up\n                  </CardTitle>\n                  <div className=\"social-line\">\n                    <Button\n                      className=\"btn-neutral btn-icon btn-round\"\n                      color=\"facebook\"\n                      href=\"#pablo\"\n                      onClick={e => e.preventDefault()}\n                    >\n                      <i className=\"fab fa-facebook-square\"></i>\n                    </Button>\n                    <Button\n                      className=\"btn-neutral btn-icon btn-round\"\n                      color=\"twitter\"\n                      href=\"#pablo\"\n                      onClick={e => e.preventDefault()}\n                      size=\"lg\"\n                    >\n                      <i className=\"fab fa-twitter\"></i>\n                    </Button>\n                    <Button\n                      className=\"btn-neutral btn-icon btn-round\"\n                      color=\"google\"\n                      href=\"#pablo\"\n                      onClick={e => e.preventDefault()}\n                    >\n                      <i className=\"fab fa-google-plus\"></i>\n                    </Button>\n                  </div>\n                </CardHeader>\n                <CardBody>\n                  <InputGroup\n                    className=\"no-border\"\n                    \n                  >\n                    <InputGroupAddon addonType=\"prepend\">\n                      <InputGroupText>\n                        <i className=\"now-ui-icons users_circle-08\"></i>\n                      </InputGroupText>\n                    </InputGroupAddon>\n                    <Input\n                      placeholder=\"First Name...\"\n                      type=\"text\"\n                    ></Input>\n                  </InputGroup>\n                </CardBody>\n                <CardFooter className=\"text-center\">\n                  <Button\n                    className=\"btn-neutral btn-round\"\n                    color=\"info\"\n                    href=\"#pablo\"\n                    onClick={e => e.preventDefault()}\n                    size=\"lg\"\n                  >\n                    Get Started\n                  </Button>\n                </CardFooter>\n              </Form>\n            </Card>\n          </Row>\n          <div className=\"col text-center\">\n            <Button\n              className=\"btn-round btn-white\"\n              color=\"default\"\n              to=\"/login-page\"\n              outline\n              size=\"lg\"\n              tag={Link}\n            >\n              View Login Page\n            </Button>\n          </div>\n        </Container>\n      </div>\n        <div className=\"App\">\n          <hr />\n        <Container>\n          <h3> Choose file to send to IPFS </h3>\n          <Form onSubmit={onSubmit}>\n            <input \n              type = \"file\"\n              onChange = {captureFile}\n            />\n             <Button \n             variant=\"success\"\n             type=\"submit\"> \n             Send it \n             </Button>\n          </Form>\n          <hr/>\n            <Button onClick = {onClick}> Get Transaction Receipt </Button>\n              <Table bordered responsive>\n                <thead>\n                  <tr>\n                    <th>Tx Receipt Category</th>\n                    <th>Values</th>\n                  </tr>\n                </thead>\n               \n                <tbody>\n                  <tr>\n                    <td>IPFS Hash # stored on Eth Contract</td>\n                    <td>{state.ipfsHash}</td>\n                  </tr>\n                  <tr>\n                    <td>Ethereum Contract Address</td>\n                    <td>{state.ethAddress}</td>\n                  </tr>\n\n                  <tr>\n                    <td>Tx Hash # </td>\n                    <td>{state.transactionHash}</td>\n                  </tr>\n\n                  <tr>\n                    <td>Block Number # </td>\n                    <td>{state.blockNumber}</td>\n                  </tr>\n\n                  <tr>\n                    <td>Gas Used</td>\n                    <td>{state.gasUsed}</td>\n                  </tr>                \n                </tbody>\n            </Table>\n        </Container>\n     </div>\n    </div>\n      );\n   \n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}